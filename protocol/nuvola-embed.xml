<?xml version="1.0" encoding="UTF-8"?>
<protocol name="nuvola_embed">

  <copyright>
    Copyright © 2020 Jiří Janoušek
  </copyright>

  <interface name="nuv_embeder" version="1">
    <description summary="create nuvola embed">...</description>

    <request name="pong">
      <description summary="respond to a ping event">...</description>
      <arg name="serial" type="uint" summary="serial of the ping event"/>
    </request>

    <request name="new_view">
      <description summary="respond to a ping event">...</description>
      <arg name="serial" type="uint" summary="serial of the ping event"/>
      <arg name="view" type="new_id" interface="nuv_view" summary="create new nuvola view"/>
      <arg name="width" type="uint" summary="new width in virtual pixels - consult scale factor"/>
      <arg name="height" type="uint" summary="new height in virtual pixels - consult scale factor"/>
      <arg name="scale" type="uint" summary="scale factor"/>
    </request>

    <event name="ping">
      <description summary="check if the client is alive">...</description>
      <arg name="serial" type="uint" summary="pass this to the pong request"/>
    </event>

    <event name="view_request">
      <description summary="create new view">...</description>
      <arg name="serial" type="uint" summary="serial of the request"/>
      <arg name="width" type="uint" summary="new width in virtual pixels - consult scale factor"/>
      <arg name="height" type="uint" summary="new height in virtual pixels - consult scale factor"/>
      <arg name="scale" type="uint" summary="scale factor"/>
    </event>

  </interface>

  <interface name="nuv_view" version="1">
    <description summary="create nuvola view">...</description>

    <event name="resize">
      <description summary="set new size">...</description>
      <arg name="width" type="uint" summary="new width in virtual pixels - consult scale factor"/>
      <arg name="height" type="uint" summary="new height in virtual pixels - consult scale factor"/>
    </event>

    <event name="rescale">
      <description summary="set new scale factor">...</description>
      <arg name="scale" type="uint" summary="scale factor"/>
    </event>
  </interface>

</protocol>
